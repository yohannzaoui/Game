<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gaming Hub - Launcher</title>
    <style>
        :root {
            --bg-dark: #050505;
            --accent: #ff00ea;
            --fortnite-green: #2ecc71;
            --damage-red: #ff0000;
            --card-bg: #111;
        }

        /* Utilisation du code body m√©moris√© */
        body { 
            background-color: #3f3f3f; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; 
            overflow: hidden; 
            color: white;
            user-select: none;
        }

        /* --- LAUNCHER SCREEN --- */
        #launcher-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, #1a1a1a 0%, #050505 100%);
        }

        .hub-title { font-size: 60px; font-weight: 900; margin-bottom: 50px; text-transform: uppercase; letter-spacing: 5px; color: var(--accent); text-shadow: 0 0 20px var(--accent); }
        .game-grid { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; }

        .game-card {
            width: 280px; height: 380px; background: var(--card-bg); 
            border: 15px solid silver; /* Bordure m√©moris√©e */
            border-radius: 20px; overflow: hidden; cursor: pointer; transition: 0.3s;
            position: relative; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 30px;
        }

        .game-card:hover { transform: translateY(-15px) scale(1.02); border-color: var(--accent); box-shadow: 0 0 30px rgba(255, 0, 234, 0.3); }
        .game-card .icon { font-size: 100px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -70%); transition: 0.3s; }
        .game-card h3 { font-size: 24px; margin: 0; text-transform: uppercase; }

        /* --- UI COMMUNE --- */
        .app-container { display: none; width: 100vw; height: 100vh; position: absolute; top: 0; left: 0; z-index: 5000; background: var(--bg-dark); }
        .btn-exit-global { position: absolute; top: 20px; right: 20px; z-index: 10000; padding: 10px 20px; background: #000; color: white; border: 1px solid #fff; cursor: pointer; border-radius: 5px; font-weight: bold; }
        .global-score { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: 40px; font-weight: 900; z-index: 9000; text-shadow: 2px 2px 0 #000; text-align: center; }

        /* --- BLOCK BLAST STYLE --- */
        #block-blast { background: #121212; flex-direction: column; align-items: center; justify-content: center; }
        #bb-grid { display: grid; grid-template-columns: repeat(8, 45px); grid-template-rows: repeat(8, 45px); gap: 4px; background: #222; padding: 8px; border-radius: 8px; }
        .bb-cell { width: 45px; height: 45px; background: #333; border-radius: 4px; transition: 0.2s; }
        .bb-cell.filled { box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        #bb-pieces { display: flex; gap: 40px; margin-top: 40px; height: 150px; align-items: center; }
        .bb-piece-container { cursor: grab; display: grid; gap: 2px; }
        .bb-mini-cell { width: 20px; height: 20px; border-radius: 3px; }

        /* Styles additionnels requis par tes instructions m√©moris√©es */
        .knob-section { display: flex; justify-content: space-between; align-items: flex-end; height: 180px; padding-bottom: -10px; margin-top: auto; }
        .controls-center-group { display: flex; align-items: flex-end; gap: 25px; transform: translateY(10px); }
    </style>
</head>
<body>

    <div id="launcher-screen">
        <h1 class="hub-title">Mini Game Hub</h1>
        <div class="game-grid">
            <div class="game-card" onclick="openApp('block-blast')">
                <div class="icon">üß±</div>
                <h3>Block Blast</h3>
            </div>
            <div class="game-card" onclick="openApp('flappy-banana')">
                <div class="icon">üçå</div>
                <h3>Flappy Banana</h3>
            </div>
            <div class="game-card" onclick="openApp('aim-trainer')">
                <div class="icon">üéØ</div>
                <h3>Aim Trainer</h3>
            </div>
        </div>
    </div>

    <div id="block-blast" class="app-container">
        <button class="btn-exit-global" onclick="closeApp('block-blast')">QUITTER</button>
        <div class="global-score">
            <span id="bb-score">0</span>
            <div style="font-size:18px; color:gold;">BEST: <span id="bb-best">0</span></div>
        </div>
        <div id="bb-grid"></div>
        <div id="bb-pieces"></div>
    </div>

    <div id="flappy-banana" class="app-container"><button class="btn-exit-global" onclick="closeApp('flappy-banana')">RETOUR</button></div>
    <div id="aim-trainer" class="app-container"><button class="btn-exit-global" onclick="closeApp('aim-trainer')">RETOUR</button></div>

    <script>
        function openApp(id) {
            document.getElementById('launcher-screen').style.display = 'none';
            document.getElementById(id).style.display = 'flex';
            if (id === 'block-blast') initBlockBlast();
        }

        function closeApp(id) {
            document.getElementById(id).style.display = 'none';
            document.getElementById('launcher-screen').style.display = 'flex';
        }

        /* --- BLOCK BLAST LOGIC --- */
        function initBlockBlast() {
            const gridEl = document.getElementById('bb-grid');
            const piecesEl = document.getElementById('bb-pieces');
            let bbScore = 0;
            let bbBest = localStorage.getItem('bbBest') || 0;
            document.getElementById('bb-best').innerText = bbBest;
            
            let grid = Array(8).fill().map(() => Array(8).fill(null));
            
            const pieceTemplates = [
                { shape: [[1,1,1],[1,1,1],[1,1,1]], color: '#e74c3c' }, // Carr√© 3x3 (Rouge)
                { shape: [[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]], color: '#9b59b6' }, // Carr√© 4x4 (Violet)
                { shape: [[1,0],[1,0],[1,1]], color: '#f1c40f' }, // L 4 segments (Jaune)
                { shape: [[1,0],[1,1]], color: '#e67e22' }, // L 3 segments (Orange)
                { shape: [[1,1,1],[1,1,1]], color: '#2ecc71' }, // Rectangle 3x2 (Vert)
                { shape: [[1,1,1,1],[1,1,1,1]], color: '#1abc9c' }, // Rectangle 4x2 (Turquoise)
                { shape: [[1,1,1,1]], color: '#3498db' }, // Ligne 4 (Bleu)
                { shape: [[1,1,1,1,1]], color: '#ffffff' }, // Ligne 5 (Blanc)
                { shape: [[1],[1],[1],[1]], color: '#34495e' }, // Colonne 4 (Gris)
                { shape: [[1],[1],[1],[1],[1]], color: '#ff00ea' } // Colonne 5 (Rose)
            ];

            function renderGrid() {
                gridEl.innerHTML = '';
                for(let r=0; r<8; r++) {
                    for(let c=0; c<8; c++) {
                        const cell = document.createElement('div');
                        cell.className = 'bb-cell';
                        if(grid[r][c]) {
                            cell.classList.add('filled');
                            cell.style.background = grid[r][c];
                        }
                        cell.ondragover = (e) => e.preventDefault();
                        cell.ondrop = (e) => handleDrop(e, r, c);
                        gridEl.appendChild(cell);
                    }
                }
            }

            function generatePieces() {
                piecesEl.innerHTML = '';
                for(let i=0; i<3; i++) {
                    const template = pieceTemplates[Math.floor(Math.random()*pieceTemplates.length)];
                    const pCont = document.createElement('div');
                    pCont.className = 'bb-piece-container';
                    pCont.draggable = true;
                    pCont.style.gridTemplateColumns = `repeat(${template.shape[0].length}, 20px)`;
                    
                    template.shape.forEach(row => {
                        row.forEach(val => {
                            const mini = document.createElement('div');
                            mini.className = 'bb-mini-cell';
                            if(val) mini.style.background = template.color;
                            pCont.appendChild(mini);
                        });
                    });

                    pCont.ondragstart = (e) => {
                        e.dataTransfer.setData('piece', JSON.stringify(template));
                        e.dataTransfer.setData('index', i);
                    };
                    piecesEl.appendChild(pCont);
                }
            }

            function handleDrop(e, row, col) {
                const data = JSON.parse(e.dataTransfer.getData('piece'));
                const pIdx = e.dataTransfer.getData('index');
                const shape = data.shape;

                let canPlace = true;
                for(let r=0; r<shape.length; r++) {
                    for(let c=0; c<shape[0].length; c++) {
                        if(shape[r][c]) {
                            if(row+r >= 8 || col+c >= 8 || grid[row+r][col+c]) canPlace = false;
                        }
                    }
                }

                if(canPlace) {
                    for(let r=0; r<shape.length; r++) {
                        for(let c=0; c<shape[0].length; c++) {
                            if(shape[r][c]) grid[row+r][col+c] = data.color;
                        }
                    }
                    piecesEl.children[pIdx].style.visibility = 'hidden';
                    checkLines();
                    renderGrid();
                    if([...piecesEl.children].every(p => p.style.visibility === 'hidden')) generatePieces();
                }
            }

            function checkLines() {
                let rowsToClear = [], colsToClear = [];
                for(let i=0; i<8; i++) {
                    if(grid[i].every(cell => cell !== null)) rowsToClear.push(i);
                    let colFull = true;
                    for(let r=0; r<8; r++) if(!grid[r][i]) colFull = false;
                    if(colFull) colsToClear.push(i);
                }
                rowsToClear.forEach(r => grid[r].fill(null));
                colsToClear.forEach(c => grid.forEach(row => row[c] = null));
                
                if(rowsToClear.length > 0 || colsToClear.length > 0) {
                    bbScore += (rowsToClear.length + colsToClear.length) * 100;
                    document.getElementById('bb-score').innerText = bbScore;
                    if(bbScore > bbBest) {
                        bbBest = bbScore;
                        localStorage.setItem('bbBest', bbBest);
                        document.getElementById('bb-best').innerText = bbBest;
                    }
                }
            }

            renderGrid();
            generatePieces();
        }
    </script>
</body>
</html>